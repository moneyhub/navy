sudo: required

language: node_js

node_js:
  - 10
  - 14

dist: bionic

services:
  - docker

env:
  matrix:
    - DOCKER_TAG=18.06-dind
    - DOCKER_TAG=20.10.5-dind
  global:
    - DEBUG='navy:*' NAVY_DEBUG='navy:*' DOCKER_COMPOSE_VERSION=1.29.2

cache:
  directories:
    - $(npm config get cache)

matrix:
  fast_finish: true

  include:
    - node_js: 10
      env: DOCKER_TAG=18.06-dind DOCKER_COMPOSE_VERSION=1.14.0
    - node-js: 14
      env: DOCKER_TAG=20.10.5-dind DOCKER_COMPOSE_VERSION=1.29.2

before_install:
  # print versions
  - docker --version

before_script:
  # bootstrap packages
  - npm run bootstrap
